# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Hybrid Bot Engine

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/teleplatform/hybrid-bot-engine.git
cd hybrid-bot-engine
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp env.example .env.local
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env.local`:

```env
# Supabase Configuration
SUPABASE_URL=https://qjzbzsvwxrecugafblnd.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_KEY=your_supabase_service_key_here

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# OpenAI Configuration (for future AI integration)
OPENAI_API_KEY=your_openai_api_key_here

# Webhook Configuration
WEBHOOK_URL=https://your-domain.com/api/bot/webhook
WEBHOOK_SECRET=your_webhook_secret_here

# Environment
NODE_ENV=development
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –≤ Supabase SQL Editor:

```sql
-- users table
create table if not exists users (
  id text primary key,
  telegram_id text,
  web_id text,
  email text,
  name text,
  last_seen timestamp default now(),
  created_at timestamp default now(),
  updated_at timestamp default now()
);

-- messages table
create table if not exists messages (
  id bigint generated by default as identity primary key,
  user_id text references users(id) on delete cascade,
  role text check (role in ('user','bot')),
  text text not null,
  timestamp timestamp default now(),
  created_at timestamp default now()
);

-- stores table
create table if not exists stores (
  id bigint generated by default as identity primary key,
  owner_id text references users(id) on delete cascade,
  name text not null,
  description text,
  status text default 'active',
  created_at timestamp default now(),
  updated_at timestamp default now()
);
```

### 5. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç Web –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```bash
./scripts/test-webhook.sh
```

### –¢–µ—Å—Ç Telegram (—Å–∏–º—É–ª—è—Ü–∏—è)

```bash
curl -X POST http://localhost:3000/api/bot/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "telegram",
    "payload": {
      "message": {
        "text": "–ü—Ä–∏–≤–µ—Ç"
      },
      "from": {
        "id": 123456789
      }
    }
  }'
```

## üöÄ –î–µ–ø–ª–æ–π

### Vercel (Frontend)

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Vercel
2. –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: `apps/webbot-ui`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. Deploy

### Railway (Backend)

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Railway
2. –£–∫–∞–∂–∏—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: `apps/bots/hybrid-bot-engine`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. Deploy

### Supabase Functions

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `pages/api/bot/webhook.ts`
2. –°–æ–∑–¥–∞–π—Ç–µ Edge Function –≤ Supabase
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Webhook

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook:

```bash
curl -X POST https://api.telegram.org/bot<YOUR_TOKEN>/setWebhook \
  -d url=https://your-domain.com/api/bot/webhook
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Supabase Dashboard: https://supabase.com/dashboard/project/qjzbzsvwxrecugafblnd
- Vercel Dashboard: https://vercel.com/dashboard
- Railway Dashboard: https://railway.app/dashboard

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- GitHub Issues: https://github.com/teleplatform/hybrid-bot-engine/issues
- Email: v.taitoo@bk.ru
- Telegram: @Vijayee83
